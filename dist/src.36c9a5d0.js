parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Q4Sv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gcd=exports.avg=exports.countDecimals=exports.ceilTo=exports.floorTo=exports.roundTo=exports.getRandBool=exports.getRandNum=void 0,exports.getRandNum=function(o,t){return void 0===t?exports.getRandNum(0,o-1):Math.floor(Math.random()*(t-o+1)+o)},exports.getRandBool=function(o){return void 0===o&&(o=.5),Math.random()<o},exports.roundTo=function(o,t){return void 0===t&&(t=0),Math.round(o*Math.pow(10,t))/Math.pow(10,t)},exports.floorTo=function(o,t){return void 0===t&&(t=0),Math.floor(o*Math.pow(10,t))/Math.pow(10,t)},exports.ceilTo=function(o,t){return void 0===t&&(t=0),Math.ceil(o*Math.pow(10,t))/Math.pow(10,t)},exports.countDecimals=function(o){return Math.floor(o)!==o?o.toString().split(".")[1].length:0},exports.avg=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];return o.reduce(function(o,t){return o+t})/o.length},exports.gcd=function(o,t){return 0===t?o:exports.gcd(t,o%t)};
},{}],"x1F4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getOpposite=exports.moveCoordinates=void 0,exports.moveCoordinates=function(e,t){var o=e.x,r=e.y;switch(t){case"left":o--;break;case"right":o++;break;case"up":r--;break;case"down":r++}return{x:o,y:r}},exports.getOpposite=function(e){return{left:"right",right:"left",up:"down",down:"up"}[e]};
},{}],"ULnS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Snake=void 0;var t=require("../coordinates"),o=function(){function o(t,o,e){this.length=e,this.body=[{x:t,y:o}]}return o.prototype.move=function(o){var e=t.moveCoordinates(this.body[0],o);this.body.unshift(e),this.body=this.body.slice(0,this.length)},o.prototype.grow=function(t){void 0===t&&(t=1),this.length+=t},o}();exports.Snake=o;
},{"../coordinates":"x1F4"}],"ykYc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Apple=void 0;var e=function(){return function(e,t,o,r){this.coordinates={x:e,y:t},this.score=o,this.color=r}}();exports.Apple=e;
},{}],"SEz9":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.RedApple=void 0;var e=require("./Apple"),r=function(e){function r(t,r){return e.call(this,t,r,1,"#f22")||this}return t(r,e),r}(e.Apple);exports.RedApple=r;
},{"./Apple":"ykYc"}],"VDGc":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.OrangeApple=void 0;var e=require("./Apple"),r=function(e){function r(t,r){return e.call(this,t,r,2,"#fc6")||this}return t(r,e),r}(e.Apple);exports.OrangeApple=r;
},{"./Apple":"ykYc"}],"uqI5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OrangeApple=exports.RedApple=exports.Apple=void 0;var e=require("./Apple");Object.defineProperty(exports,"Apple",{enumerable:!0,get:function(){return e.Apple}});var r=require("./RedApple");Object.defineProperty(exports,"RedApple",{enumerable:!0,get:function(){return r.RedApple}});var p=require("./OrangeApple");Object.defineProperty(exports,"OrangeApple",{enumerable:!0,get:function(){return p.OrangeApple}});
},{"./Apple":"ykYc","./RedApple":"SEz9","./OrangeApple":"VDGc"}],"F1KC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Game=void 0;var e=require("../../libs/math"),t=require("../snake"),i=require("../apples"),n=require("../coordinates"),s=function(){function s(e,i){var n=this;this.directions=[],this.apples=[],this.cellSize=30,this.fieldBackground="#000",this.startLength=3,this.speed=150,this.orangeAppleSpawnRate=.02,this.orangeAppleDuration=1e4,this.fieldSize=i,this.root=document.querySelector(e),this.root.innerHTML="",this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=this.fieldSize*this.cellSize,this.ctx=this.canvas.getContext("2d"),this.root.append(this.canvas);var s=Math.floor(this.fieldSize/2);this.snake=new t.Snake(s,s,this.startLength),this.loop=this.loop.bind(this),window.addEventListener("keyup",function(e){if(!n.lastDirection||n._play){var t;switch(e.key){case"ArrowLeft":t="left";break;case"ArrowRight":t="right";break;case"ArrowUp":t="up";break;case"ArrowDown":t="down"}t&&t!==n.directions[0]&&(n.directions.unshift(t),n.directions=n.directions.slice(0,5),n.lastDirection||n.play())}}),this.render()}return s.prototype.play=function(){this._play=!0,this.loop(),console.log("Game started")},s.prototype.pause=function(){this._play=!1,console.log("Game paused")},s.prototype.getRandCoords=function(){for(var t=this,i=this.snake.body.map(function(e){var i=e.x;return e.y*t.fieldSize+i}),n=[],s=function(e){if(i.find(function(t){return t===e}))return"continue";var t=Math.floor(e/o.fieldSize),s=e-t*o.fieldSize;n.push({x:s,y:t})},o=this,r=0;r<Math.pow(this.fieldSize,2);r++)s(r);return n[e.getRandNum(n.length)]},s.prototype.clearField=function(){var e=this.canvas,t=e.width,i=e.height;this.ctx.clearRect(0,0,t,i)},s.prototype.renderField=function(){var e=this.fieldSize,t=this.ctx,i=this.cellSize;t.fillStyle="#000";for(var n=0;n<e;n++)for(var s=0;s<e;s++)t.fillRect(n*i+1,s*i+1,i-2,i-2)},s.prototype.renderSnake=function(){var e=this.ctx,t=this.cellSize,i=this.snake.body;e.fillStyle="#2f4",i.forEach(function(i){var n=i.x,s=i.y;e.fillRect(n*t+1,s*t+1,t-2,t-2)})},s.prototype.moveSnake=function(){var e=this.directions,t=this.lastDirection,i=e.find(function(e){return e!==n.getOpposite(t)});this.snake.move(i),this.lastDirection=i},s.prototype.renderApples=function(){var e=this.ctx,t=this.cellSize;this.apples.forEach(function(i){var n=i.coordinates,s=n.x,o=n.y;e.fillStyle=i.color,e.fillRect(s*t+1,o*t+1,t-2,t-2)})},s.prototype.spawnRedApple=function(){var e=this.getRandCoords(),t=e.x,n=e.y,s=new i.RedApple(t,n);this.apples.push(s)},s.prototype.needRedApple=function(){return!this.apples.find(function(e){return e instanceof i.RedApple})},s.prototype.spawnOrangeApple=function(){var e=this,t=this.getRandCoords(),n=t.x,s=t.y,o=new i.OrangeApple(n,s);this.apples.push(o),setTimeout(function(){var t=e.apples.indexOf(o);-1!==t&&e.apples.splice(t,1)},this.orangeAppleDuration)},s.prototype.needOrangeApple=function(){return!this.apples.find(function(e){return e instanceof i.OrangeApple})&&e.getRandBool(this.orangeAppleSpawnRate)},s.prototype.checkRules=function(){var e=this.fieldSize,t=this.lastDirection,i=this.directions.find(function(e){return e!==n.getOpposite(t)}),s=this.snake.body,o=n.moveCoordinates(s[0],i),r=o.x,a=o.y;return!(r<0||r>e-1||a<0||a>e-1||s.some(function(e){return e.x===r&&e.y===a}))},s.prototype.checkAppleCollisions=function(){var e=this,t=this.snake.body[0],i=t.x,n=t.y;this.apples.forEach(function(t){var s=t.coordinates,o=t.score;s.x===i&&s.y===n&&(e.snake.grow(o),e.apples.splice(e.apples.indexOf(t),1))})},s.prototype.render=function(){this.renderField(),this.renderSnake(),this.renderApples()},s.prototype.loop=function(){var e=this;if(!this.checkRules())return this.pause();this.needRedApple()&&this.spawnRedApple(),this.needOrangeApple()&&this.spawnOrangeApple(),this.clearField(),this.moveSnake(),this.checkAppleCollisions(),this.render(),this._play&&setTimeout(function(){return requestAnimationFrame(e.loop)},this.speed)},s}();exports.Game=s;
},{"../../libs/math":"Q4Sv","../snake":"ULnS","../apples":"uqI5","../coordinates":"x1F4"}],"QCba":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./components/game"),r=new e.Game("#root",21);
},{"./components/game":"F1KC"}]},{},["QCba"], null)
//# sourceMappingURL=src.36c9a5d0.js.map